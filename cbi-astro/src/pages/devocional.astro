---
// src/pages/devocional.astro
import Layout from '../layouts/Layout.astro';
import ArrowRightIcon from "../components/icons/ArrowRightIcon.astro"
import OpenBookIcon from "../components/icons/OpenBookIcon.astro"

// Fetch devotional content from WordPress
const response = await fetch('https://cbiorlando.org/wp-json/wp/v2/pages?slug=devocional');
const data = await response.json();
console.log('Devotional Data:', JSON.stringify(data, null, 2));

// Extract the first item from the array
const devotional = data[0];

// Format the date
const date = new Date(devotional.modified_gmt);
const month = date.toLocaleString('es-ES', { month: 'long' });
const day = date.getDate();
const year = date.getFullYear();
const formattedDate = `${month} ${day} ${year}`;

console.log("HERE", devotional)
---

<Layout title={devotional.title.rendered}>
  <div class="container mx-auto px-4 py-8">
    <article class="max-w-3xl mx-auto">
      <!-- Header -->
      <header class="mb-8">
        <div class="flex items-center gap-4 mb-4">
          <div class="bg-blue-800 rounded-full p-4">
            <OpenBookIcon size={28} color="white" />
          </div>
          <h1 class="text-3xl font-bold text-gray-900" set:html={devotional.title.rendered} />
        </div>
        <p class="text-gray-500 capitalize">
          {formattedDate}
        </p>
      </header>

      <!-- Content -->
      <div class="prose prose-lg" set:html={devotional.content.rendered} />

      <!-- Navigation -->
      <!-- <div class="mt-12 flex justify-between items-center">
        <a href="/" class="inline-flex items-center text-blue-800 hover:text-blue-600">
          <ArrowRightIcon size={16} class="mr-2 rotate-180" />
          Volver al inicio
        </a>
      </div> -->
    </article>
  </div>
</Layout>