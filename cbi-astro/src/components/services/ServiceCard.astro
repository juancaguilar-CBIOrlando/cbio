---
import { Image } from "astro:assets"
import { Navigation } from "@lucide/astro"
import type { ImageMetadata } from "astro"

interface Props {
  day: string
  image: ImageMetadata
  name: string
  times: string | string[]
  address: string
  mapsLink: string
  imageAlt?: string
  location?: string
}

const { day, image, name, times, address, mapsLink, imageAlt, location } =
  Astro.props

// Handle times - can be a string or array of strings
const timesArray = Array.isArray(times) ? times : [times]
---

<a
  href={mapsLink}
  target="_blank"
  rel="noopener noreferrer"
  class="box rounded-sm relative block group cursor-pointer transition-transform duration-300 hover:scale-[1.02]"
  aria-label={`Abrir ${name} en Google Maps`}>
  <div class="absolute top-4 right-4 bg-white z-10 p-2 px-4 rounded-sm">
    <h2 class="text-black tracking-widest text-2xl font-bebas">
      {day}
    </h2>
  </div>
  <Image
    src={image}
    alt={imageAlt || `${name} - ${day}`}
    quality={85}
    class="w-full h-full object-cover aspect-video rounded-sm rounded-b-none"
  />
  <div
    class="info-box flex justify-between gap-2 bg-black text-white p-4 rounded-b-sm">
    <div class="flex flex-col gap-1 p-2">
      <h2 class="text-xl font-bold font-bebas tracking-wider">
        {name}
      </h2>
      <div class="text-3xl font-bebas flex items-center gap-2 flex-wrap">
        {
          timesArray.length > 0 && (
            <>
              <span class="text-primary">{timesArray[0]}</span>
              {timesArray.slice(1).map((time) => (
                <>
                  <div class="h-1 w-1 bg-primary rounded-full" />
                  <span class="text-primary">{time}</span>
                </>
              ))}
            </>
          )
        }
      </div>
      <p class="text-gray-400">
        {location || address}
      </p>
    </div>
    <div class="relative">
      <div
        class="text-white bg-primary rounded-full p-4 inline-block group-hover:bg-primary/90 transition-colors duration-300"
        aria-hidden="true">
        <Navigation width={28} height={28} />
      </div>
    </div>
  </div>
</a>
